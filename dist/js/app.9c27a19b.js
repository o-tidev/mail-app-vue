(function(e){function t(t){for(var c,a,l=t[0],o=t[1],u=t[2],s=0,b=[];s<l.length;s++)a=l[s],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&b.push(r[a][0]),r[a]=0;for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c]);d&&d(t);while(b.length)b.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],c=!0,l=1;l<n.length;l++){var o=n[l];0!==r[o]&&(c=!1)}c&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},r={app:0},i=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"3d5e":function(e,t,n){"use strict";n("a6ea")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("830f"),r=n("5c40"),i=Object(r["m"])("h1",null,"Vue Mail",-1),a=Object(r["l"])(" Loading... ");function l(e,t){var n=Object(r["u"])("MailTable");return Object(r["r"])(),Object(r["h"])(r["c"],null,[i,Object(r["m"])(r["d"],null,{default:Object(r["A"])((function(){return[Object(r["m"])(n)]})),fallback:Object(r["A"])((function(){return[a]})),_:1})],64)}var o={class:"mail-table"};function u(e,t){var n=Object(r["u"])("bulk-action-bar"),c=Object(r["u"])("MailView"),i=Object(r["u"])("modal-view");return Object(r["r"])(),Object(r["h"])(r["c"],null,[Object(r["m"])("button",{onClick:t[1]||(t[1]=function(t){return e.selectScreen("inbox")}),disabled:"inbox"===e.selectedScreen},"Inbox ",8,["disabled"]),Object(r["m"])("button",{onClick:t[2]||(t[2]=function(t){return e.selectScreen("archive")}),disabled:"archive"===e.selectedScreen},"Archive ",8,["disabled"]),Object(r["m"])(n,{emails:e.filteredEmails},null,8,["emails"]),Object(r["m"])("table",o,[Object(r["m"])("tbody",null,[(Object(r["r"])(!0),Object(r["h"])(r["c"],null,Object(r["s"])(e.filteredEmails,(function(t){return Object(r["r"])(),Object(r["h"])("tr",{key:t.id,class:["clickable",t.read?"read":""]},[Object(r["m"])("td",null,[Object(r["m"])("input",{type:"checkbox",onClick:function(n){return e.emailSelection.toggle(t)},checked:e.emailSelection.emails.has(t)},null,8,["onClick","checked"])]),Object(r["m"])("td",{onClick:function(n){return e.openEmail(t)}},Object(r["x"])(t.from),9,["onClick"]),Object(r["m"])("td",{onClick:function(n){return e.openEmail(t)}},[Object(r["m"])("p",null,[Object(r["m"])("strong",null,Object(r["x"])(t.subject),1),Object(r["l"])(" - "+Object(r["x"])(t.body),1)])],8,["onClick"]),Object(r["m"])("td",{class:"date",onClick:function(n){return e.openEmail(t)}},Object(r["x"])(e.format(new Date(t.sentAt),"MMM do yyyy")),9,["onClick"]),Object(r["m"])("td",null,[Object(r["m"])("button",{onClick:function(n){return e.archiveEmail(t)}},"Archive",8,["onClick"])])],2)})),128))])]),e.openedEmail?Object(r["m"])(i,{key:0,onCloseModal:t[4]||(t[4]=function(t){return e.openedEmail=null})},{default:Object(r["A"])((function(){return[Object(r["m"])(c,{email:e.openedEmail,onChangeEmail:t[3]||(t[3]=function(t){return e.changeEmail(t)})},null,8,["email"])]})),_:1}):Object(r["i"])("",!0)],64)}n("4de4"),n("c975"),n("96cf");var d=n("1da1"),s=n("b166"),b=n("bc3a"),m=n.n(b),f={class:"email-display"},h={class:"mb-0"},O=Object(r["l"])("Subject: ");function j(e,t){return Object(r["r"])(),Object(r["h"])("div",f,[Object(r["m"])("div",null,[Object(r["m"])("button",{onClick:t[1]||(t[1]=function(t){return e.toggleArchive(t)})},Object(r["x"])(e.email.archived?"Move to Inbox (e)":"Archive (e)"),1),Object(r["m"])("button",{onClick:t[2]||(t[2]=function(t){return e.toggleRead(t)})},Object(r["x"])(e.email.read?"Mark Unread (r)":"Mark Read (r)"),1),Object(r["m"])("button",{onClick:t[3]||(t[3]=function(t){return e.goNewer(t)})},"Newer (k)"),Object(r["m"])("button",{onClick:t[4]||(t[4]=function(t){return e.goOlder(t)})},"Older Email (j)")]),Object(r["m"])("h2",h,[O,Object(r["m"])("strong",null,Object(r["x"])(e.email.subject),1)]),Object(r["m"])("div",null,[Object(r["m"])("em",null,"From "+Object(r["x"])(e.email.from)+" on "+Object(r["x"])(e.format(new Date(e.email.sentAt),"MMM do yyyy")),1)]),Object(r["m"])("div",{innerHTML:e.marked(e.email.body)},null,8,["innerHTML"])])}var p=n("e0c1"),v=n.n(p),g=(n("7db0"),function(e){var t=function(t){var n=e.find((function(e){return e.key===t.key}));n&&n.fn()};window.addEventListener("keydown",t),Object(r["p"])((function(){window.removeEventListener("keydown",t)}))}),k=g,y={setup:function(e,t){var n=t.emit,c=(e.email,function(){n("changeEmail",{toggleRead:!0,save:!0})}),r=function(){n("changeEmail",{toggleArchive:!0,save:!0,closeModal:!0})},i=function(){n("changeEmail",{changeIndex:-1})},a=function(){n("changeEmail",{changeIndex:1})},l=function(){n("changeEmail",{changeIndex:-1,toggleArchive:!0,save:!0})},o=function(){n("changeEmail",{changeIndex:1,toggleArchive:!0,save:!0})};return k([{key:"r",fn:c},{key:"e",fn:r},{key:"k",fn:i},{key:"j",fn:a},{key:"[",fn:l},{key:"]",fn:o}]),{format:s["a"],marked:v.a,toggleRead:c,toggleArchive:r,goNewer:i,goOlder:a}},props:{email:{type:Object,required:!0}}};n("9a8e");y.render=j;var E=y,S={class:"modal"},x={class:"modal-card"};function M(e,t){return Object(r["r"])(),Object(r["h"])("div",S,[Object(r["m"])("div",{class:"overlay",onClick:t[1]||(t[1]=function(t){return e.emit("closeModal")})}),Object(r["m"])("div",x,[Object(r["t"])(e.$slots,"default")])])}var w={setup:function(e,t){var n=t.emit;return k([{key:"Escape",fn:function(){n("closeModal")}}]),{emit:n}}};n("f4a9");w.render=M;var C=w,A=(n("4160"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("a1e9")),R=Object(A["g"])(new Set),_=function(){var e=function(e){R.has(e)?R.delete(e):R.add(e)},t=function(){R.clear()},n=function(e){e.forEach((function(e){R.add(e)}))},c=function(e){R.forEach((function(t){e(t),m.a.put("http://localhost:3000/emails/".concat(t.id),t)}))},r=function(){return c((function(e){return e.read=!0}))},i=function(){return c((function(e){return e.read=!1}))},a=function(){c((function(e){return e.archived=!0})),t()};return{emails:R,toggle:e,clear:t,addMultiple:n,markRead:r,markUnread:i,archive:a}},I=_,P=(n("a623"),n("2909")),T={class:"bulk-action-bar"},L={class:"checkbox"},U={class:"buttons"};function V(e,t){return Object(r["r"])(),Object(r["h"])("div",T,[Object(r["m"])("span",L,[Object(r["m"])("input",{type:"checkbox",checked:e.allEmailsSelected,class:[e.someEmailSelected?"partial-check":""],onClick:t[1]||(t[1]=function(t){return e.bulkSelect(t)})},null,10,["checked"])]),Object(r["m"])("span",U,[Object(r["m"])("button",{onClick:t[2]||(t[2]=function(t){return e.emailSelection.markRead()}),disabled:Object(P["a"])(e.emailSelection.emails).every((function(e){return e.read}))},"Mark Read ",8,["disabled"]),Object(r["m"])("button",{onClick:t[3]||(t[3]=function(t){return e.emailSelection.markUnread()}),disabled:Object(P["a"])(e.emailSelection.emails).every((function(e){return!e.read}))},"Mark Unread ",8,["disabled"]),Object(r["m"])("button",{onClick:t[4]||(t[4]=function(t){return e.emailSelection.archive()}),disabled:0===e.numberSelected},"Archive ",8,["disabled"])])])}var N={setup:function(e){var t=I(),n=Object(r["g"])((function(){return t.emails.size})),c=Object(r["g"])((function(){return e.emails.length})),i=Object(r["g"])((function(){return n.value===c.value})),a=Object(r["g"])((function(){return n.value>0&&n.value<c.value})),l=function(){i.value?t.clear():t.addMultiple(e.emails)};return{allEmailsSelected:i,someEmailsSelected:a,numberSelected:n,emailSelection:t,bulkSelect:l}},props:{emails:{type:Array,required:!0}}};n("8982");N.render=V;var q=N,B={setup:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("http://localhost:3000/emails");case 2:return t=e.sent,n=t.data,e.abrupt("return",{emailSelection:I(),format:s["a"],emails:n,openedEmail:null,selectedScreen:Object(A["h"])("inbox")});case 5:case"end":return e.stop()}}),e)})))()},components:{MailView:E,ModalView:C,BulkActionBar:q},computed:{sortedEmails:function(){return this.emails.sort((function(e,t){return e.sentAt<t.sentAt?1:-1}))},filteredEmails:function(){return"inbox"===this.selectedScreen?this.sortedEmails.filter((function(e){return!e.archived})):this.sortedEmails.filter((function(e){return e.archived}))}},methods:{selectScreen:function(e){this.selectedScreen=e,this.emailSelection.clear()},openEmail:function(e){this.openedEmail=e,e&&(e.read=!0,this.updateEmail(e))},archiveEmail:function(e){e.archived=!0,this.updateEmail(e)},changeEmail:function(e){var t=e.toggleRead,n=e.toggleArchive,c=e.save,r=e.closeModal,i=e.changeIndex,a=this.openedEmail;if(t&&(a.read=!a.read),n&&(a.archived=!a.archived),c&&this.updateEmail(a),r&&(this.openedEmail=null),i){var l=this.filteredEmails,o=l.indexOf(this.openedEmail),u=l[o+i];this.openEmail(u)}},updateEmail:function(e){m.a.put("http://localhost:3000/emails/".concat(e.id),e)}}};n("3d5e");B.render=u;var D=B,H={name:"App",components:{MailTable:D},setup:function(){return{emailSelection:I()}}};n("64be");H.render=l;var J=H;Object(c["a"])(J).mount("#app")},"64be":function(e,t,n){"use strict";n("ca3b")},8982:function(e,t,n){"use strict";n("d3da")},"9a3b":function(e,t,n){},"9a8e":function(e,t,n){"use strict";n("f51a")},a6ea:function(e,t,n){},ca3b:function(e,t,n){},d3da:function(e,t,n){},f4a9:function(e,t,n){"use strict";n("9a3b")},f51a:function(e,t,n){}});
//# sourceMappingURL=app.9c27a19b.js.map